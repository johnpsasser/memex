# Contributing to {{PROJECT_NAME}}

> A guide for AI agents and developers working on this project

This document explains how to effectively use the documentation system and contribute changes.

---

## Documentation Philosophy

### Token Efficiency Principle

The documentation system is designed to minimize token usage for AI agents:

- **Keyword-based discovery** - Find what you need without reading everything
- **Hierarchical loading** - Load only specific sections via anchor links
- **Cross-referenced** - Navigate between related concepts efficiently
- **Minimal redundancy** - Each concept documented once, referenced everywhere

### The Three-Tier System

```
1. GLOSSARY.md (entry point)
   |-- Keyword index
   |-- Topic groupings
   +-- Quick reference tables

2. Specialized Documentation
   |-- core/          <- Architecture, database, API
   |-- features/      <- Feature-specific docs
   +-- operations/    <- Deployment, troubleshooting

3. Master Reference
   +-- CLAUDE.md      <- Quick instructions for Claude Code
```

**Rule of Thumb:** Start with GLOSSARY.md, load specific sections, fall back to CLAUDE.md only when needed.

---

## How to Use Documentation

### Step 1: Search the Glossary

Always start here: `docs/GLOSSARY.md`

Example workflow:
```
Task: "Fix database query issue"

1. Open GLOSSARY.md
2. Search for: "query"
   -> Found: query -> docs/core/DATABASE.md#queries
3. Load specific section: docs/core/DATABASE.md#queries
4. Find the relevant query patterns
```

### Step 2: Load Specific Sections

Use markdown anchor links to jump directly to relevant sections:

```markdown
# Instead of reading entire file
Read: DATABASE.md (full file)

# Load specific section only
Read: DATABASE.md#queries (just that section)
```

### Step 3: Cross-Reference Properly

When you find information, check cross-references:

```
Found in CLAUDE.md:
  "See docs/core/DATABASE.md#queries for details"

Action: Load docs/core/DATABASE.md#queries
```

---

## When to Update Documentation

### New Features

**Rule:** If you add a feature, update documentation BEFORE committing code.

Required updates:

1. **GLOSSARY.md** - Add keywords for discoverability
2. **Specialized doc** - Add detailed implementation
3. **CLAUDE.md** - Update if it affects key files or constraints

### Architecture Changes

**Trigger:** Changes to service topology, data flow, or system boundaries

**Update:** `docs/core/ARCHITECTURE.md` AND affected specialized docs

### API Changes

**Trigger:** New endpoints, changed signatures, deprecated routes

Update locations:
1. `docs/core/API.md` - Add endpoint documentation
2. `GLOSSARY.md` - Add keywords
3. `CLAUDE.md#key-files` - If creates new critical route file

---

## Document Size Limits

Keep documents manageable for efficient loading.

| Level | Max Lines | Target Lines | Rationale |
|-------|-----------|--------------|-----------|
| File | 800 | 400-600 | Fits in context with room for conversation |
| Section | 150 | 50-100 | Section-level loading stays efficient |
| Index/glossary | 1000 | 500-800 | Keyword indexes are naturally larger |

### Section-Level Loading

The context-enricher hook supports loading specific sections via anchors:

```markdown
# In GLOSSARY.md:
- **schema** -> `core/DATABASE.md#table-definitions` - Table structure

# The hook will load only that section, not the full file
```

**Section best practices:**
- Keep sections under 150 lines for efficient loading
- Use descriptive headers that make good anchor names
- If a section exceeds 150 lines, break it into subsections

### Splitting Large Documents

When a document grows beyond 800 lines, split it into sub-documents.

**Naming convention:** `CATEGORY_SUBCATEGORY.md`

Examples:
```
DATABASE.md (overview, links to sub-docs)
DATABASE_SCHEMA.md (table definitions)
DATABASE_QUERIES.md (query patterns)
DATABASE_MIGRATIONS.md (migration procedures)
```

The parent document becomes a hub that links to sub-documents:

```markdown
## Database Documentation

- [Schema](DATABASE_SCHEMA.md) - Table definitions and constraints
- [Queries](DATABASE_QUERIES.md) - Common query patterns
- [Migrations](DATABASE_MIGRATIONS.md) - Migration procedures
```

---

## Token Efficiency Guidelines

Every token costs time and context budget. Write docs that maximize information density.

### Prefer Tables Over Paragraphs

Tables are compact and scannable:

```markdown
# Instead of:
The database connection pool uses a minimum of 5 connections,
a maximum of 20 connections, and times out after 30 seconds.

# Use:
| Setting | Value |
|---------|-------|
| Min connections | 5 |
| Max connections | 20 |
| Timeout | 30s |
```

### Use Anchor Links for Cross-References

Link to specific sections rather than entire files:

```markdown
# Instead of:
See DATABASE.md for query patterns.

# Use:
See [Query Patterns](DATABASE.md#queries).
```

### Avoid Redundancy

Document each concept once in its authoritative location, then reference it elsewhere. If you find yourself copying content, create a single source and link to it.

### Keep Code Examples Minimal

Show only the relevant parts, not full file dumps. Include just enough context to be useful.

---

## Documentation Patterns

### Use Markdown Headers for Sections

Headers automatically create anchor links:

```markdown
## Main Section       -> #main-section
### Subsection        -> #subsection
#### Detail Level     -> #detail-level
```

### Use Tables for Reference Data

Tables are easy to scan and consume few tokens.

### Include "Key Files" Sections

Help agents locate relevant code quickly with file paths and line numbers.

---

## Git Workflow

### Commit Messages

Follow conventional commits:

```
feat: Add new feature
fix: Fix bug
docs: Update documentation
refactor: Restructure code
test: Add tests
```

### Pre-Commit Checklist

- [ ] Code compiles
- [ ] Tests pass
- [ ] Documentation updated (GLOSSARY.md + specialized docs)
- [ ] No console.log left in production code

---

## Summary

1. **Start with GLOSSARY.md** for keyword lookup
2. **Load specific sections** via anchor links
3. **Update docs as you code** - not after
4. **Follow established patterns** in existing docs

---

**Last Updated:** {{DATE}}
